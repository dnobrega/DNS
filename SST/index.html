<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://dnobrega.github.io/DNS/SST/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>SST - DNS documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "SST";
    var mkdocs_page_input_path = "SST.md";
    var mkdocs_page_url = "/DNS/SST/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-XXXXXXXX-X', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DNS documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">INTRODUCTION</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../macos/">MAC OS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../terminal/">TERMINAL</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../python/">PYTHON</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../bifrost/">BIFROST</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../sswidl/">SSWIDL</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../idl/">IDL</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../dns/">DNS</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">SST</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#sst-main-links">SST main links</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#sst-literature">SST literature</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#connecting-to-sst-computers">Connecting to SST computers</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quicklook-movies-and-images">Quicklook movies and images</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scripts">Scripts</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../IRIS/">IRIS</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../SOLO/">SOLO</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../SDO/">SDO</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ALMA/">ALMA</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../about/">ABOUT ME</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DNS documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>SST</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="sst">SST<a class="headerlink" href="#sst" title="Permanent link">&para;</a></h1>
<p>The Swedish 1-m Solar Telescope (SST) is a refracting solar telescope at Roque de los Muchachos Observatory, La Palma in the Canary Islands.
The SST is capable of providing high-quality time series of spectrally resolved photospheric and chromospheric diagnostics that under excellent seeing conditions reach the diffraction limit of 0.1" over the full arcmin^2 FOV. Furthermore, the versatile CRISP instrument can provide spectro-polarimetric data that enable measurement of the magnetic field topology. In addition, the tunable filter system CHROMIS, installed in 2016, can simultaneously provide narrowband filtergrams at several wavelengths in the core of the Ca II K line (Extracted from <a href="https://ui.adsabs.harvard.edu/abs/2020A%26A...641A.146R/abstract">Rouppe et al. (2020)</a>).</p>
<h2 id="sst-main-links">SST main links<a class="headerlink" href="#sst-main-links" title="Permanent link">&para;</a></h2>
<ul>
<li>Overview of the observation conditions at the ORM in La Palma: <a href="https://shahin.website/sst/">Shahin's website</a></li>
<li>SST wiki of RoCS: <a href="https://wiki.uio.no/mn/astro/lapalma/">Wiki</a></li>
<li>SST Observations Schedule: <a href="https://dubshen.astro.su.se/wiki/index.php/Observations_schedule_2021">SST Schedule</a></li>
<li>SST Data acquisitions: <a href="https://dubshen.astro.su.se/wiki/index.php/Data_acquisitions">Data acquisitions</a></li>
</ul>
<h2 id="sst-literature">SST literature<a class="headerlink" href="#sst-literature" title="Permanent link">&para;</a></h2>
<ul>
<li>The SST telescope design and its main optical elements: <a href="https://ui.adsabs.harvard.edu/abs/2003SPIE.4853..341S/abstract">Scharmer et al. 2003a</a>.</li>
<li>The SST adaptive optics system: <a href="https://ui.adsabs.harvard.edu/abs/2003SPIE.4853..370S/abstract">Scharmer et al. 2003a</a>.</li>
<li>The CHROMospheric Imaging Spectrometer (CHROMIS): <a href="https://dubshen.astro.su.se/wiki/index.php/CHROMIS">CHROMIS webpage</a> </li>
<li>The CRISP imaging spectropolarimeter: <a href="https://ui.adsabs.harvard.edu/abs/2008ApJ...689L..69S/abstract">Scharmer et al. 2008</a></li>
<li>Upgrades of optical components and instrumentation, as well as a thorough evaluation of optical performance: <a href="https://ui.adsabs.harvard.edu/abs/2019A%26A...626A..55S/abstract">Scharmer et al. 2019</a>.</li>
</ul>
<h2 id="connecting-to-sst-computers">Connecting to SST computers<a class="headerlink" href="#connecting-to-sst-computers" title="Permanent link">&para;</a></h2>
<p>It is possible to login into the SST related computers to transfer files and to make the quicklook movies. To that end, type:<br />
<code>ssh obs@royac6.royac.iac.es</code></p>
<details>
 <summary>Password</summary>
 <p>
 3skedar
 </p>
</details>

<p>Then you can type, e.g., <code>ssh -X obs@transport1</code> to login into the transport1 machine.</p>
<h2 id="quicklook-movies-and-images">Quicklook movies and images<a class="headerlink" href="#quicklook-movies-and-images" title="Permanent link">&para;</a></h2>
<p>ITA has now a very basic web server with the purpose of providing simple access to files ment for temporary viewing - like quicklook movies. 
We can put the SST quicklook movies at <code>/mn/stornext/d18/lapalma/quicklook/</code> which will then appear under http://tsih3.uio.no/lapalma/
- <em>For example, the 14-Jun quicklook movies from the LMSAL campaign are now under</em>  <br />
 http://tsih3.uio.no/lapalma/2020/2020-06-14/
<em>which are linked from the Oslo SST wiki:</em> 
 <a href="https://wiki.uio.no/mn/astro/lapalma/index.php/Quicklook_June_2020#Sunday_14-Jun-2020">https://wiki.uio.no/mn/astro/lapalma/index.php/Quicklook_June_2020#Sunday_14-Jun-2020</a></p>
<h2 id="scripts">Scripts<a class="headerlink" href="#scripts" title="Permanent link">&para;</a></h2>
<p>A list of useful scripts that may help you. To see the code block, just click in the name:</p>
<details>
 <summary>Script to transfer all the CRISP and CHROMIS quicklook files from transport1 to Oslo: </summary>
 <p>

 ```bash
 #!/bin/bash

 #------------------------------------------------------------------------------------------
 # DATE
 default_date=`date +"%Y.%m.%d"`
 read -p "Enter date with format YYYY.MM.DD ($default_date): " userdate
 : "${userdate:=$default_date}"
 year=${userdate:0:4}
 month=${userdate:5:2}
 day=${userdate:8:2}
 #------------------------------------------------------------------------------------------

 #------------------------------------------------------------------------------------------
 # LOCATION OF THE QUICKLOOK MOVIES
 crisp_folder="/scratch/obs/$userdate/CRISP/quicklook/"
 chromis_folder="/scratch/obs/$userdate/CHROMIS/quicklook/"
 echo "Preparing to transfer quicklook files from the following folders: "
 echo $crisp_folder
 echo $chromis_folder
 #------------------------------------------------------------------------------------------

 #------------------------------------------------------------------------------------------
 # OSLO DESTINATION
 default_folder="/mn/stornext/d18/lapalma/quicklook/$year/$year-$month-$day/"
 read -p "Enter destination at ITA ($default_folder): " ita_folder
 : "${ita_folder:=$default_folder}"
 #------------------------------------------------------------------------------------------

 #------------------------------------------------------------------------------------------
 # OSLO USER
 default_user=desiveri
 read -p "Enter your UiO username ($default_user): " username
 : "${username:=$default_user}"
 #------------------------------------------------------------------------------------------

 #------------------------------------------------------------------------------------------
 # RSYNC TO OSLO
 rsync -avzP $crisp_folder $chromis_folder \
       --rsync-path="mkdir -p $ita_folder && rsync" \
       $username@tsih.uio.no:$ita_folder
 #------------------------------------------------------------------------------------------
 ```
 </p>
</details>

<details>
 <summary>Script to combine CHROMIS quicklook movies and images</summary>
 <p>

 ```bash
 #!/bin/bash
 quickfile1=4861_+0
 quickfile2=-1371
 image_format=.jpg
 movie_format=.mov

 for ii in $( ls -d */); do
     jj="${ii///}"
     cd $jj
     temp=*$quickfile1*$image_format
     header=$( echo $temp | sed -e 's/\(quick_..........\).*/\1/')"_"
     image=$header"${jj//:}"$image_format 
     movie=$header"${jj//:}"$movie_format
     echo $image 
     echo $movie         
     ysize=$(ffprobe -v error -select_streams v:0 -show_entries stream=height -of csv=s=x:p=0 *$quickfile1*$image_format)
     echo $ysize
     ffmpeg -i *$quickfile1*$image_format -i \
               *$quickfile2*$image_format    \
               -q:v 1 -filter_complex vstack=inputs=2 $image -hide_banner    
     ffmpeg -i *$quickfile1*$movie_format -i \
               *$quickfile2*$movie_format    \
               -filter_complex vstack=inputs=2 \
                $movie -hide_banner    
     cd ..       
 done
```
 </p>
</details>

<details>
 <summary>Script to combine CRISP quicklook movies and images:</summary>
 <p>

 ```bash
 #!/bin/bash
 quickfile1=6563_+0
 quickfile2=8542_+0
 quickfile3=-1680
 image_format=.jpg
 movie_format=.mov

 for ii in $( ls -d */); do
     jj="${ii///}"
     cd $jj
     temp=*$quickfile1*$image_format
     header=$( echo $temp | sed -e 's/\(quick_..........\).*/\1/')"_"
     image=$header"${jj//:}"$image_format 
     movie=$header"${jj//:}"$movie_format
     ffmpeg -i *$quickfile1*$image_format -i \
               *$quickfile2*$image_format -i \
               *$quickfile3*$image_format      \
               -q:v 1 -filter_complex hstack=inputs=3 $image -hide_banner    
     ffmpeg -i *$quickfile1*$movie_format -i \
               *$quickfile2*$movie_format -i \
               *$quickfile3*$movie_format      \
               -filter_complex hstack=inputs=3 $movie -hide_banner    
     cd ..       
 done
 ```
 </p>
</details>

<details>
 <summary>Script to see in the terminal a list of dates with quicklook movies available at ITA:</summary>
 <p>

 ```bash
 #!/bin/bash                                                                                                                    
 for year in $(curl -s http://tsih3.uio.no/lapalma/ |
                   grep '\[DIR\]' |
                   sed 's/.*href="//' |
                   sed 's/".*//'
              ); do
     echo "---------------------------"
     echo $year
     echo "---------------------------"
     for date in $(curl -s http://tsih3.uio.no/lapalma/$year |
                       grep '\[DIR\]' |
                       sed 's/.*href="//' |
                       sed 's/".*//'); do
         echo $date
     done
 done
 ```

 </p>
</details>

<details>
 <summary>Script to download quicklook movies from ITA by date:</summary>
 <p>


 ```bash
 #!/bin/bash                                                                                                                                                   
 web="http://tsih3.uio.no/lapalma/"
 input=$1
 if [ ${#input} -eq 0 ]
 then
     folder=$web
     read -p "Do you want to download all the available movies from "$folder" [y/n]: " yn
     case $yn in
         [Yy]* ) wget -c -r -l 3 --cut-dirs=1 -nH --no-parent --reject="index.html*" $folder;;
         [Nn]* ) break;;
     esac
 fi
 if [ ${#input} -eq 4 ]
 then
     folder=$web$input"/"
     wget -c -r -l 2 --cut-dirs=1 -nH --no-parent --reject="index.html*" $folder
 fi
 if [ ${#input} -eq 7 ]
 then
     temp=(${input//-/ })
     year=${temp[0]}
     folder=$web$year"/"
     echo $folder
     echo  ${input}*
     for date in $(curl -s $folder |
                       grep '\[DIR\]' |
                       sed 's/.*href="//' |
                       sed 's/".*//'); do
         if [[ "$date" == "$input"* ]]; then
             echo $date
             wget -c -r -l 2 --cut-dirs=1 -nH --no-parent --reject="index.html*" $folder"/"$date
         fi
     done
 fi
 if [ ${#input} -eq 10 ]
 then
     temp=(${input//-/ })
     year=${temp[0]}
     folder=$web$year"/"$input"/"
     wget -c -r -l 1 --cut-dirs=1 -nH --no-parent --reject="index.html*" $folder
 fi
 ```

 </p>
</details>

<details>
 <summary>Script to extract IRIS SAA times for the SST log:</summary>
 <p>

 This scripts extracts the IRIS SAA times and copy them in your clipboard on MacOs systems.
 ```bash
 curl -s $1 | grep SAAI | awk '{print $2}' | sed -e 's/\(:..\).*/\1/' > saai.txt
 curl -s $1 | grep SAAO | awk '{print $2}' | sed 's/\(:..\).*/\1/'  > saao.txt
 paste -d "~" saai.txt saao.txt | sed 's/~/ - /' | pbcopy -selection c
 rm saai.txt
 rm saao.txt
 ```
 The input of the script for a given day can be found within TIM in the following webpage (Please note that for weekends, the TIM link will provide the SAA dates for Saturday, Sunday and Monday):
 [IRIS_SAA](https://iris.lmsal.com/health-safety/timeline/)

 For Linux, if you have X installed you may define an equivalent to pbcopy from MacOS in this way :
 ```bash
 alias pbcopy='xsel --clipboard --input'
 alias pbpaste='xsel --clipboard --output'
 ```
 or with xclip:
 ```bash
 alias pbcopy='xclip -selection clipboard'
 alias pbpaste='xclip -selection clipboard -o'
 ```
 </p>
</details>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../IRIS/" class="btn btn-neutral float-right" title="IRIS">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dns/" class="btn btn-neutral" title="DNS"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2019 - 2020 Daniel Nobrega Siverio</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../dns/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../IRIS/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
